<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Windows (dockerfile-opam.Dockerfile_opam.Windows)</title><link rel="stylesheet" href="../../../_odoc_support/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.2.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../_odoc_support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">dockerfile-opam</a> &#x00BB; <a href="../index.html">Dockerfile_opam</a> &#x00BB; Windows</nav><header class="odoc-preamble"><h1>Module <code><span>Dockerfile_opam.Windows</span></code></h1><p>Windows specific Dockerfile utility functions.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec value anchored" id="val-run_cmd"><a href="#val-run_cmd" class="anchor"></a><code><span><span class="keyword">val</span> run_cmd : <span><span><span>(<span class="type-var">'a</span>, unit, string, <a href="../../../dockerfile/Dockerfile/index.html#type-t">Dockerfile.t</a>)</span> <span class="xref-unresolved">Stdlib</span>.format4</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p><code>run_cmd fmt</code> will execute <code>cmd /S /C fmt</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-run_powershell"><a href="#val-run_powershell" class="anchor"></a><code><span><span class="keyword">val</span> run_powershell : 
  <span>?escape:<span>(<span>string <span class="arrow">&#45;&gt;</span></span> string)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'a</span>, unit, string, <a href="../../../dockerfile/Dockerfile/index.html#type-t">Dockerfile.t</a>)</span> <span class="xref-unresolved">Stdlib</span>.format4</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p><code>run_powershell fmt</code> will execute <code>powershell -Command &quot;fmt&quot;</code>.</p><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">escape</span> <p>(defaults to <code>Fun</code>.id) allows to escape <code>fmt</code> because the calling shell (usually <code>cmd</code>) might interpret unwanted things in <code>fmt</code>. This might help embedding readable powershell code.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-run_vc"><a href="#val-run_vc" class="anchor"></a><code><span><span class="keyword">val</span> run_vc : 
  <span>arch:<span class="xref-unresolved">Ocaml_version</span>.arch <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'a</span>, unit, string, <a href="../../../dockerfile/Dockerfile/index.html#type-t">Dockerfile.t</a>)</span> <span class="xref-unresolved">Stdlib</span>.format4</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p><code>run_vc ~arch fmt</code> will execute <code>run fmt</code> with Visual Compiler for <code>~arch</code> loaded in the environment.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-run_ocaml_env"><a href="#val-run_ocaml_env" class="anchor"></a><code><span><span class="keyword">val</span> run_ocaml_env : 
  <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'a</span>, unit, string, <a href="../../../dockerfile/Dockerfile/index.html#type-t">Dockerfile.t</a>)</span> <span class="xref-unresolved">Stdlib</span>.format4</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p><code>run_ocaml_env args fmt</code> will execute <code>fmt</code> in the environment loaded by <code>ocaml-env exec</code> with <code>args</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-sanitize_reg_path"><a href="#val-sanitize_reg_path" class="anchor"></a><code><span><span class="keyword">val</span> sanitize_reg_path : <span>unit <span class="arrow">&#45;&gt;</span></span> <a href="../../../dockerfile/Dockerfile/index.html#type-t">Dockerfile.t</a></span></code></div><div class="spec-doc"><p><code>sanitize_reg_path ()</code> adds the command necessary to remove a trailing backslash from the <code>PATH</code> value stored in the registry and must be called before any further manipulation of this variable is done in the Dockerfile. The following error is raised if <code>PATH</code> isn't sanitized.</p><pre>/usr/bin/bash: -c: line 0: unexpected EOF while looking for matching `&quot;'
/usr/bin/bash: -c: line 1: syntax error: unexpected end of file</pre></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-install_vc_redist"><a href="#val-install_vc_redist" class="anchor"></a><code><span><span class="keyword">val</span> install_vc_redist : <span>?vs_version:string <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="arrow">&#45;&gt;</span></span> <a href="../../../dockerfile/Dockerfile/index.html#type-t">Dockerfile.t</a></span></code></div><div class="spec-doc"><p>Install Microsoft Visual C++ Redistributable.</p><ul class="at-tags"><li class="see"><span class="at-tag">see</span> <a href="https://support.microsoft.com/en-us/help/2977003/the-latest-supported-visual-c-downloads" class="value">https://support.microsoft.com/en-us/help/2977003/the-latest-supported-visual-c-downloads</a> </li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-install_visual_studio_build_tools"><a href="#val-install_visual_studio_build_tools" class="anchor"></a><code><span><span class="keyword">val</span> install_visual_studio_build_tools : 
  <span>?vs_version:string <span class="arrow">&#45;&gt;</span></span>
  <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span>
  <a href="../../../dockerfile/Dockerfile/index.html#type-t">Dockerfile.t</a></span></code></div><div class="spec-doc"><p>Install Visual Studio Build Tools components.</p><ul class="at-tags"><li class="see"><span class="at-tag">see</span> <a href="https://docs.microsoft.com/en-us/visualstudio/install/workload-component-id-vs-build-tools?view=vs-2019" class="value">https://docs.microsoft.com/en-us/visualstudio/install/workload-component-id-vs-build-tools?view=vs-2019</a> </li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-ocaml_for_windows_package_exn"><a href="#val-ocaml_for_windows_package_exn" class="anchor"></a><code><span><span class="keyword">val</span> ocaml_for_windows_package_exn : 
  <span>switch:<span class="xref-unresolved">Ocaml_version</span>.t <span class="arrow">&#45;&gt;</span></span>
  <span>port:<span>[ `Mingw <span>| `Msvc</span> ]</span> <span class="arrow">&#45;&gt;</span></span>
  <span>arch:<span class="xref-unresolved">Ocaml_version</span>.arch <span class="arrow">&#45;&gt;</span></span>
  string * string</span></code></div><div class="spec-doc"><p><code>ocaml_for_windows_variant ~port ~arch</code> returns the <code>(package_name, package_version)</code> of the OCaml compiler package in OCaml for Windows, if applicable.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-remove_system_attribute"><a href="#val-remove_system_attribute" class="anchor"></a><code><span><span class="keyword">val</span> remove_system_attribute : <span>?recurse:bool <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <a href="../../../dockerfile/Dockerfile/index.html#type-t">Dockerfile.t</a></span></code></div><div class="spec-doc"><p>Remove the system attribute on a path. Might be useful to copy data across images when building Docker images.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-header"><a href="#val-header" class="anchor"></a><code><span><span class="keyword">val</span> header : 
  <span>alias:string <span class="arrow">&#45;&gt;</span></span>
  <span>?win10_revision:<a href="../Distro/index.html#type-win10_lcu">Distro.win10_lcu</a> <span class="arrow">&#45;&gt;</span></span>
  <span>?version:<a href="../Distro/index.html#type-win_all">Distro.win_all</a> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="arrow">&#45;&gt;</span></span>
  <a href="../../../dockerfile/Dockerfile/index.html#type-t">Dockerfile.t</a></span></code></div><div class="spec-doc"><p>A Dockerfile header for multi-staged builds.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Cygwin"><a href="#module-Cygwin" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Cygwin/index.html">Cygwin</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Rules for Cygwin-based installation.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Winget"><a href="#module-Winget" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Winget/index.html">Winget</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Rules for winget installation.</p></div></div></div></body></html>